# Text Linter - Cursor Rules

## 概要
このプロジェクトは、URLリストからWebページのテキストを取得し、既存のproofreader.jsとCursorのLLMを使って誤字・誤記の校正を行うツールです。

## 自動実行ルール

### ユーザーが「校正して」「校正」「チェック」「lint」と言った場合
以下の手順で自動実行してください：

**重要: 新しいJavaScriptファイルは作成せず、既存のproofreader.jsを使用してください**

1. **事前チェック**
   - `urls.txt`ファイルが存在し、有効なURLが含まれていることを確認
   - `proofreader.js`ファイルが存在することを確認
   - `node_modules`ファイルが存在しなければ `npm install` を実行

2. **テキスト抽出の実行**
   既存のproofreader.jsを実行してWebページからテキストを抽出：
   ```
   node proofreader.js
   ```
   このスクリプトは以下を自動実行します：
   - urls.txtからURLリストを読み込み
   - 各URLに対してPlaywrightでページアクセス
   - mainタグ → bodyタグの順でテキスト抽出
   - エラーハンドリングとレポート生成

3. **抽出結果の確認**
   - 生成された `text-extraction/text-extraction-[timestamp].md` ファイルを確認
   - 抽出されたテキストデータを取得

4. **校正実行**
   proofreader.jsが抽出した各ページのテキストに対して、以下のプロンプトでLLM校正を実行（応答メッセージには校正対象テキストを含めないこと）：
   ```
   以下のテキストの誤字・誤記をチェックして、問題がある箇所のみを指摘してください。

   【校正対象テキスト】
   [抽出されたテキスト]

   【校正観点】
   1. 基本的な誤字・誤記
      - タイポ、スペルミス
      - 明らかな文法エラー
      - 固有名詞の綴り
      - 変換ミス

   2. 日本語固有の観点
      - 漢字の使い分け
      - 同音異義語の使い分け
      - 送り仮名の正確性
      - 助詞の使い方（「は」vs「わ」等）

   3. 英語固有の観点
      - 英単語の綴り

   【指摘形式】
   - 誤字・誤記がある場合のみ、以下の形式で指摘してください：
     - 位置: [該当箇所の前後の文脈]
     - 誤り: [間違っている部分]
     - 修正案: [正しい表記]
     - 理由: [修正理由]

   - 誤字・誤記がない場合は「校正すべき箇所はありませんでした。」とだけ回答してください。

   【注意事項】
   - 英語・日本語両方対応
   - 明確な誤字・誤記のみを指摘（文体や表現の好みは除く）
   - 応答には校正結果のみを返すこと
   - 応答には校正対象テキストを含めないこと
   ```

5. **最終レポート生成**
   - 全ての校正結果をMarkdown形式で最終レポート生成
   - ファイル名: `report/proofreading-report-[timestamp].md`
   - **レポート形式**: `report-template.md`のテンプレートを使用
   - プレースホルダーを実際のデータで置換してレポート作成
   - 校正結果のみを返す

6. **結果表示**
   - 処理完了をユーザーに報告
   - 生成されたレポートファイルの場所を案内
   - 主要な統計情報を要約して表示

## レポートテンプレート

### テンプレートファイル
- `report-template.md`を使用してレポートを生成
- プレースホルダー形式で統一されたレポート構造を提供

- `[ERROR_PERCENTAGE]`: 要修正ページの割合

### レポート品質基準
- サマリーテーブルには全ページの状況を一覧表示
- 詳細結果は誤記があるページのみ記載

## 重要な制約事項

### ファイル作成ルール
- 既存の`proofreader.js`を使用すること
- レポートファイル（.md）のみ新規作成可能
- `report-template.md`テンプレートの使用必須


