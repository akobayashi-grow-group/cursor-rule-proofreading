# Text Linter - Cursor Rules

## 概要
このプロジェクトは、URLリストからWebページのテキストを取得し、既存のproofreader.jsとCursorのLLMを使って誤字・誤記の校正を行うツールです。

## 自動実行ルール

### ユーザーが「校正して」「校正」「チェック」「lint」と言った場合
以下の手順で自動実行してください：

**重要: 新しいJavaScriptファイルは作成せず、既存のproofreader.jsを使用してください**

1. **事前チェック**
   - `urls.txt`ファイルが存在し、有効なURLが含まれていることを確認
   - `proofreader.js`ファイルが存在することを確認
   - 必要に応じて依存関係をインストール: `npm install`

2. **テキスト抽出の実行**
   既存のproofreader.jsを実行してWebページからテキストを抽出：
   ```
   node proofreader.js
   ```
   このスクリプトは以下を自動実行します：
   - urls.txtからURLリストを読み込み
   - 各URLに対してPlaywrightでページアクセス
   - mainタグ → bodyタグの順でテキスト抽出
   - エラーハンドリングとレポート生成

3. **抽出結果の確認**
   - 生成された `text-extraction-[timestamp].md` ファイルを確認
   - 抽出されたテキストデータを取得

4. **校正実行**
   proofreader.jsが抽出した各ページのテキストに対して、以下のプロンプトでLLM校正を実行：
   ```
   以下のテキストの誤字・誤記をチェックして、問題がある箇所のみを指摘してください。

   【校正対象テキスト】
   [抽出されたテキスト]

   【指摘形式】
   - 誤字・誤記がある場合のみ、以下の形式で指摘してください：
     - 位置: [該当箇所の前後の文脈]
     - 誤り: [間違っている部分]
     - 修正案: [正しい表記]
     - 理由: [修正理由]

   - 誤字・誤記がない場合は「校正すべき箇所はありませんでした。」とだけ回答してください。

   【注意事項】
   - 英語・日本語両方対応
   - 明確な誤字・誤記のみを指摘（文体や表現の好みは除く）
   - タイポ、スペルミス、明らかな文法エラーを対象
   - 返信には抽出されたテキスト全文を含めず、校正結果のみを返すこと
   ```

5. **最終レポート生成**
   - 全ての校正結果をMarkdown形式で最終レポート生成
   - ファイル名: `proofreading-report-[timestamp].md`
   - テキスト抽出結果と校正結果の両方を含む

6. **結果表示**
   - 処理完了をユーザーに報告
   - 生成されたレポートファイルの場所を案内
   - 主要な統計情報を要約して表示

## 重要な制約事項

### ファイル作成ルール
- 既存の`proofreader.js`を使用すること
- レポートファイル（.md）のみ新規作成可能


